---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import BlogPost from "../../components/BlogPost.astro";
import { render } from "astro:content";
import type { CollectionEntry } from "astro:content";

interface Props {
  post: CollectionEntry<"blog">;
}

export async function getStaticPaths() {
  const posts = await getCollection("blog");
  return posts.map((post) => ({
    params: { slug: post.id },
    props: { post },
  }));
}

const { post } = Astro.props;
const renderedPost = await render(post);
---

<Layout
  title={`${post.data.title} - Dhemas Nurjaya`}
  description={post.data.description}
>
  <BlogPost
    title={post.data.title}
    description={post.data.description}
    date={post.data.date}
    tags={post.data.tags}
  >
    <renderedPost.Content />
  </BlogPost>
</Layout>
